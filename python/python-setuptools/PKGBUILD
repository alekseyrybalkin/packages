pkgname=python-setuptools
pkgver=47.1.1
vcs=git
vcs_pkgname=setuptools
gittag=v${pkgver}
relmon_id=4021

build() {
    sed -i -e "s/version = self._get_version()/version = '${pkgver}'/g" pkg_resources/__init__.py

    python bootstrap.py
}

package() {
    pip install \
        --no-deps \
        --no-build-isolation \
        --ignore-installed \
        --compile \
        --prefix=/usr \
        --root=${pkgdir} .

    # remove files with spaces in filenames
    rm ${pkgdir}/usr/lib/python*/site-packages/setuptools/script*
    rm ${pkgdir}/usr/lib/python*/site-packages/setuptools/command/launcher*
}
