pkgname=python-modernize
pkgver=0.7
vcs=git
gittag=${pkgver}
relmon_id=3925

build() {
    python setup.py build

    if [ -z "${DISABLE_SPHINX}" ]; then
        # rename sphinx function from deprecated name to new one
        sed -i -e 's/add_description_unit/add_object_type/g' docs/sphinxext/extra_types.py
        cd docs
        make html
    fi
}

package() {
    python setup.py install --root=${pkgdir}
    if [ -z "${DISABLE_SPHINX}" ]; then
        mkdir -pv ${pkgdir}/usr/share/doc
        cp -r docs/_build/html ${pkgdir}/usr/share/doc/${pkgname}
    fi
}
