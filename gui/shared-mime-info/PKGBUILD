pkgname=shared-mime-info
pkgver=2.0.0.1
vcs=git
gittag=jinni-${pkgver}
relmon_id=5524

build() {
    export ac_cv_func_fdatasync=no

    mkdir build
    meson --prefix=/usr -D libexecdir=/usr/lib -D sysconfdir=/etc . build
    ninja -C build
}

package() {
    DESTDIR=${pkgdir} ninja -C build install
    update-mime-database ${pkgdir}/usr/share/mime
}

after_install() {
    update-mime-database -n /usr/share/mime
}

after_upgrade() {
    after_install
}

generated_files="usr/share/applications/mimeinfo.cache"
